(()=>{"use strict";var e,t,s,a,n={49501:function(e,t,s){s(46437);var a=s(86324),n=s(54536),i=s(42081),o=s(31297);s(74456);var r=s(35877),l=s(2837),c=s(41195);s(36255);var d=s(39928);s(9505);var h=s(23537);s(44253),s(8451);var u=s(81099);s(45420),s(33561),s(64401);var v=s(85510),p=s(99093);s(17832),s(9697);var m=s(31671),g=s(52350);async function b(){return new Promise(async e=>{var t=await m.default();e(new g.P(!0,t))})}async function w(e){var t=f(e),s=y(t),a=await b();return s&&t&&a?(s.enablePhysics(new c.Pq(0,-9.81,0),a),addEventListener("resize",()=>{t.resize()}),{scene:s,engine:t,havok:a}):null}s(11631),s(43306),s(23681),s(78837),s(42087),s(98668),s(9433),s(69463),s(29592),Promise.resolve().then(s.bind(s,51658));let f=e=>e?new n.N(e,!0,{preserveDrawingBuffer:!1,stencil:!0},!0):null,y=e=>e?new a.Z(e):null;var E=s(99851),k={paths:{assets:"./",css:"./css",icons:"./icon",image:"./images",texture:"./textures",scripts:"./scripts",models:"./models"},state:{state:1,stopRender:!1,scene:null,engine:null,camera:null,canvas:null,isMobile:!1},navigationMap:new Map,level:null,physics:{havok:null},objects:{enemy:new Map}},P=new class{switchState(e){switch(e){case 0:this.hide(4),this.hide(5),this.hide(2),this.hide(3),this.hide(31),this.hide(1),this.show(0);break;case 1:this.hide(4),this.hide(5),this.hide(2),this.hide(3),this.hide(31),this.hide(0),this.show(1);break;case 2:this.hide(4),this.hide(5),this.hide(1),this.hide(0),this.show(2),k.state.isMobile?this.show(31):this.show(3);break;case 3:break;case 4:this.hide(1),this.hide(5),this.hide(0),this.hide(2),this.hide(3),this.hide(31),this.show(4);break;case 5:this.hide(1),this.hide(0),this.hide(2),this.hide(3),this.hide(31),this.hide(4),this.show(5)}}getScreen(e){return this.screens.get(e)}add(e,t){return this.screens.set(e,t),t}hide(e){this.screens.get(e).classList.add("hide")}show(e){this.screens.get(e).classList.remove("hide")}resize(){var e=window.innerWidth/this.width;this.width!=window.innerWidth&&(this.width=innerWidth),this.screens.forEach(t=>{t.style.scale=`scale(${e})`})}updateLevelScreen(e){console.log("level:",e.title)}constructor(){(0,E._)(this,"screens",new Map),(0,E._)(this,"width",window.innerWidth),(0,E._)(this,"height",window.innerWidth)}},M=e=>k.objects.enemy.get(e),S=s(63049);function L(e,t,s,a){var n=new S.Pp;return n.name=e,n.thickness=t,n.color=s,n.background=a,n.paddingLeft="0px",n.paddingRight="0px",n.paddingTop="0px",n.paddingBottom="0px",n}var C=s(5984);function T(e,t,s){var e=e,a=s??C.v9j.White(),n=new C.RlV(C.Pq0.Zero(),C.Pq0.Zero(),0,0),i=new C.pJU(n),o=null;return{id:e,ray:()=>n,attach:(e,t)=>{i.attachToMesh(e,t.direction,t.origin,t.length)},show:()=>i.show(t,a),hide:()=>i.hide(),cast:(e,s)=>{o=t.onBeforeRenderObservable.add(()=>{e(t.pickWithRay(n,e=>{var t=!0;return s.forEach(s=>{e.name===s&&(t=!1)}),t}))})},dispose:()=>{i.dispose(),o&&o.remove(!0)}}}async function A(e,t){var s=!1,a=0,n=(0,h.an)("hero",{width:1,height:2,depth:1},t);n.position=new c.Pq(10,1,0);var o=new r.F("hero-material",t);o.diffuseColor=new i.v9(.4,.7,.8),n.material=o,n.checkCollisions=!0,n.collisionGroup=1,n.collisionMask=128;var l=0,d=T("ground-ray",t,i.v9.Red());d.attach(n,{origin:new c.Pq(0,-1,-.5),direction:new c.Pq(0,-1,0),length:1}),d.show(),d.cast(e=>{e&&e.hit&&(l=e.distance)},[n.name,"ray"]);var u=T("forward-ray",t,i.v9.Red());return u.attach(n,{origin:new c.Pq(0,.5,-.5),direction:n.forward.clone(),length:10}),u.show(),u.cast(e=>{e&&e.hit},[n.name,"ray"]),t.onBeforeRenderObservable.add(()=>{l>.05?n.moveWithCollisions(n.up.scale(-.2)):s=!1}),{mesh:n,stop:()=>{a=0},rotateAngl:e=>{n.rotation.y=e},rotateCW:()=>{n.moveWithCollisions(n.forward.scale(.01)),n.rotate(p._0.Y,.1)},rotateCCW:()=>{n.moveWithCollisions(n.forward.scale(.01)),n.rotate(p._0.Y,-.1)},fwd:()=>{a<.2&&(a+=.025),n.moveWithCollisions(n.forward.scale(a))},bwd:()=>{a<.1&&(a+=.015),n.moveWithCollisions(n.forward.scale(a))},jump:()=>{if(!s){console.log("JUMP",s),s=!0;var e=.5,i=t.onBeforeRenderObservable.add(()=>{a>.025&&(a-=.002),e>.05?(e-=.025,n.movePOV(0,e,a)):i.remove()})}}}}var _=new Map;async function x(e,t,s){var a=await (0,v.uD)(e,s);_.set(t,a)}async function q(e){await x(`${k.paths.models}/jamPole.glb`,1,e)}async function B(e){var t,s=(t=_.get(e))?t.instantiateModelsToScene(e=>e,!1,{doNotInstantiate:!0}):null,a=null==s?void 0:s.rootNodes[0];return a||null}var R=s(3395),O=s(46662),j="preload",I="start",N="run-game",D="pause-level",H="stop-level",$="create-enemy";async function W(){return new Promise(e=>{var t=setTimeout(()=>{clearTimeout(t),dispatchEvent(new CustomEvent(j,{detail:{percent:25,stage:"loader core"}})),e(!0)},200)})}async function F(e){var t,s,a=k.state.isMobile;if(a){let t,s,a;var n,r,d,h,u,v,p,m=(n=S.vs.CreateFullscreenUI("UI"),r=0,d=0,h=0,u=0,v=!1,p=k.state.canvas,(t=L("leftThumb",2,"blue","transparent")).height="300px",t.width="300px",t.isPointerBlocker=!0,t.horizontalAlignment=S.Ec.HORIZONTAL_ALIGNMENT_LEFT,t.verticalAlignment=S.Ec.VERTICAL_ALIGNMENT_BOTTOM,t.alpha=.4,t.left=150,t.top=-150,(s=L("leftInnterThumb",4,"blue","transparent")).height="100px",s.width="100px",s.isPointerBlocker=!0,s.horizontalAlignment=S.Ec.HORIZONTAL_ALIGNMENT_CENTER,s.verticalAlignment=S.Ec.VERTICAL_ALIGNMENT_CENTER,(a=L("leftPuck",0,"blue","blue")).height="80px",a.width="80px",a.isPointerBlocker=!0,a.horizontalAlignment=S.Ec.HORIZONTAL_ALIGNMENT_CENTER,a.verticalAlignment=S.Ec.VERTICAL_ALIGNMENT_CENTER,t.onPointerDownObservable.add(e=>{a.isVisible=!0,a.left=u=e.x-.5*t._currentMeasure.width-150,a.top=-1*(h=p.height-e.y-.5*t._currentMeasure.height+-150),v=!0,t.alpha=.9}),t.onPointerUpObservable.add(()=>{r=0,d=0,v=!1,a.isVisible=!1,t.alpha=.4}),t.onPointerMoveObservable.add(e=>{v&&(r=e.x-.5*t._currentMeasure.width-150,d=p.height-e.y-.5*t._currentMeasure.height+-150,u=r,h=-1*d,a.left=u,a.top=h)}),n.addControl(t),t.addControl(s),t.addControl(a),a.isVisible=!1,{data:()=>({x:r,y:d})});e.clearColor=new i.ov(70/255,70/255,70/255,1)}else{var g,b=(g=0,e.actionManager=new C.mjK(e),e.actionManager.registerAction(new C.FHw(C.mjK.OnKeyDownTrigger,e=>{var t=e.sourceEvent.code;"KeyA"===t&&(g|=4),"KeyD"===t&&(g|=8),"KeyW"===t&&(g|=1),"KeyS"===t&&(g|=2),"Space"===t&&(g|=16),("ShiftLeft"===t||"ShiftRight"===t)&&(g|=32)})),e.actionManager.registerAction(new C.FHw(C.mjK.OnKeyUpTrigger,e=>{var t=e.sourceEvent.code;"KeyA"===t&&(g&=-5),"KeyD"===t&&(g&=-9),"KeyW"===t&&(g&=-2),"KeyS"===t&&(g&=-3),"Space"===t&&(g&=-17),("ShiftLeft"===t||"ShiftRight"===t)&&(g&=-33)})),{getState:()=>g});e.clearColor=new i.ov(40/255,41/255,40/255,1)}e.ambientColor=new i.v9(4/255,9/255,12/255),e.collisionsEnabled=!0;var w=new l.d("base-camera",new c.Pq(0,300,0),e);w.target=new c.Pq(0,1,0),w.maxZ=1050,w.attachControl(),new o.g("base-light",new c.Pq(0,1,0),e).intensity=1.9;var f=new C.ZyN("shagow-light",new c.Pq(-.3,-1,-.5),e),y=new C.owA(1024,f);new C.FUi("enemy-material",e).diffuseColor=new i.v9(.3,.3,.7);var E=new C.FUi("enemy-escape-material",e);E.diffuseColor=new i.v9(.9,.3,.3),E.alpha=.6;var P=new C.FUi("enemy-hunting-material",e);P.diffuseColor=new i.v9(.1,.3,.9),P.alpha=.6;var M=new C.FUi("enemy-collider-material",e);M.diffuseColor=new i.v9(.3,.3,.7),M.alpha=.6;var T=await B(1),_=new Map,x=new Map;if(T){T.name="pole",T.getChildMeshes().forEach(e=>{if(e.checkCollisions=!0,y.addShadowCaster(e),e.receiveShadows=!0,e.name.includes("ground")?(e.receiveShadows=!0,e.collisionGroup=128,e.collisionMask=128):e.visibility=0,e.name.includes("most")){var t=e.getChildTransformNodes(!1,e=>e.name.includes("pt")).map(e=>e.getAbsolutePosition());x.set(e.name,t),e.collisionGroup=128,e.collisionMask=3}if(e.name.includes("path")){var t=e.getChildTransformNodes(!1,e=>e.name.includes("pt")).map(e=>e.getAbsolutePosition());_.set(e.name,t),e.collisionGroup=64,e.collisionMask=0}e.name.includes("hole")&&(e.checkCollisions=!1,e.name="hole",e.collisionGroup=64,e.collisionMask=0)}),k.navigationMap.set("paths",_),k.navigationMap.set("mosts",x);var q=T.getChildTransformNodes(!1,e=>e.name.includes("pt-nav")).map(e=>e.getAbsolutePosition().clone());k.navigationMap.set("ground",q)}var j=await A(0,e);(t=0,s=(0,R.Y)(1e3).pipe((0,O.v)(()=>t<100)),{run:()=>{s.subscribe({next:()=>{t+=1,dispatchEvent(new CustomEvent($))},complete:()=>{}})}}).run(),j&&e.onBeforeRenderObservable.add(()=>{if(a){var e=m.data(),t=-Math.atan2(e.y,e.x);j.rotateAngl(t)}else{var s=b.getState();switch(s){case 0:j.stop();break;case 1:j.fwd();break;case 2:j.bwd();break;case 8:case 9:j.rotateCW();break;case 4:case 5:j.rotateCCW();break;case 6:case 10:break;case 16:case 17:j.jump();break;case 32:console.log("Shift Key")}}}),setTimeout(console.log,1e3,"hello")}function G(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=s.length,n=0;for(;n<e;)t+=s.charAt(Math.floor(Math.random()*a)),n+=1;return t}function K(e,t){let s=Math.floor(Math.random()*t);return s>t?t:s<e?e:s}function V(){return Math.random()>=.5?1:-1}var z=(e,t,s,a)=>{var n=a;return C.Pq0.DistanceSquared(s,a)<t&&(n=z(e,t,s,U(e))),n},U=e=>e[e.length*Math.random()|0];addEventListener(j,e=>{P.switchState(0),P.getScreen(0).update(e.detail)}),addEventListener(I,e=>{k.state.state=1,P.switchState(1)}),addEventListener(N,e=>{if(k.state.isMobile){var t,s=document.querySelector("#root");s.requestFullscreen?(s.requestFullscreen(),console.log("full")):console.log("no-full")}var a=e.detail.scene;a&&(P.switchState(2),k.level.run(),t=a.getEngine(),a&&t&&a.getEngine().runRenderLoop(()=>{a.render()}),k.state.state=2)}),addEventListener(D,()=>{var e=k.level;e.state()?e.stop():e.run()}),addEventListener(H,()=>{k.level.stop(),dispatchEvent(new CustomEvent(I))}),addEventListener("end-level",()=>{console.log("Level End"),dispatchEvent(new CustomEvent(I))}),addEventListener("end-game",()=>{console.log("End GAme"),dispatchEvent(new CustomEvent(I))}),addEventListener($,async e=>{var t,s,a,n,o,r,l,v,p,m,g,b,w,f,y,E,P,M,L,A,_,x,q,B,R,O,j,I,N,D,H,$,W,F,U,Z,Y,J=(t=new c.Pq(K(10,30)*V(),1,K(10,30)*V()),(s=k.state.scene,a={moved:!0,state:"LIVE",live:Math.floor(100*Math.random()),arsenal:{bullets:100},killedEnemy:[],killer:""},n=`enemy-${G()}`,o=parseFloat(((2*Math.random()+2)/10).toFixed(2)),r=!1,l=10,v=!1,p=s.getMaterialByName("enemy-hunting-material"),m=s.getMaterialByName("enemy-escape-material"),g=s.getMaterialByName("enemy-collider-material"),b=s.getMaterialByName("enemy-material"),(w=(0,h.an)(n,{width:1,height:2,depth:1},s)).name=n,w.position.y=3,w.material=b,w.checkCollisions=!0,w.collisionGroup=2,w.collisionMask=128,(f=(0,C.zkL)(`${n}-collider`,{height:2,diameter:20,cap:1,enclose:!1},s)).setParent(w),f.setPositionWithLocalVector(new c.Pq(0,1.5,0)),f.material=g,f.checkCollisions=!0,f.collisionGroup=2,f.collisionMask=128,f.actionManager=new C.mjK(s),y=`${n}-table`,E=new c.Pq(0,5,0),P=`${n}`,(M=(0,d.x)(y,{width:20,height:10},s)).setParent(w),M.setPositionWithLocalVector(E),M.billboardMode=u.e.BILLBOARDMODE_ALL,L=S.vs.CreateForMesh(M,1024,512),(A=new S.tN).width=1024,A.height=512,A.background="transparent",A.color="#fff",L.addControl(A),(_=new S.VJ).text=P,_.color="#000",_.fontSize=250,A.addControl(_),x={huntingState:()=>{A.background="#f66"},escapeState:()=>{A.background="#66f"},defaultState:()=>{A.background="transparent"},deathState:()=>{A.background="#333"},updateLive:e=>{_.text=e}},q={hit:!1,distance:0,object:null},B={hit:!1,distance:0,object:null},(R=T(`ground-ray-${n}`,s,i.v9.Red())).attach(w,{origin:new c.Pq(0,-1,-.5),direction:new c.Pq(0,-1,0),length:5}),R.show(),R.cast(e=>{e&&e.hit?(q.hit=!0,q.distance=e.distance,q.object=null==e?void 0:e.pickedMesh):(q.hit=!1,q.distance=-1,q.object=null)},[w.name,"ray","hole"]),(O=T(`view-fwd-ray-${n}`,s,i.v9.Red())).attach(w,{origin:new c.Pq(0,.5,.5),direction:new c.Pq(0,0,1),length:20}),O.show(),O.cast(e=>{e&&e.hit?(B.hit=!0,B.distance=e.distance,B.object=null==e?void 0:e.pickedMesh):(B.hit=!1,B.distance=-1,B.object=null)},[w.name,"ray"]),j=()=>{a.state="DEATH",w.checkCollisions=!1,v=!0,a.moved=!1,R.dispose(),O.dispose(),w.name="DEATH",x.deathState(),console.log(n,"is DEATH")},I=e=>{var t=e.getPosition().subtract(w.getAbsolutePosition().clone()).normalize(),s=-Math.atan2(t.z,t.x)-Math.PI/2+Math.PI;return w.rotation.y=s,new Promise((t,s)=>t(e))},N=()=>{x.defaultState(),f.material=g,v=!1,o=parseFloat(((2*Math.random()+2)/10).toFixed(2))},D=e=>{x.huntingState(),f.material=p,v=!0,o=.2,r=!1;var t=5,n=s.onBeforeRenderObservable.add(()=>{H(e)||(n.remove(),N()),t||("DEATH"===a.state&&(n.remove(),j()),(c.Pq.Distance(w.getAbsolutePosition().clone(),e.getPosition())>40||"DEATH"===e.getState().state)&&(n.remove(),N()),I(e),t=5),t--})},$={id:n,mesh:w,setPosition:e=>w.position=e,getPosition:()=>w.getAbsolutePosition().clone(),lookAt:e=>{w.lookAt(e)},lookAtEnemy:I,moveFWD:()=>{r||w.moveWithCollisions(w.forward.scale(o),!0)},moveTo:e=>{w.lookAt(e),w.moveWithCollisions(w.forward.scale(o),!0)},rotateY:e=>{w.rotation.y=e},jump:e=>{var t=.3,a=0,n=s.onBeforeRenderObservable.add(()=>{t-=.06,w.position.y+=t,a<w.position.y&&(a=w.position.y),t<=0&&(n.remove(),e())})},dispose:()=>{w.dispose(),R.dispose(),O.dispose()},getState:()=>a,attack:H=e=>!!a.arsenal.bullets&&(0==(l-=1)&&(l=10,a.arsenal.bullets-=1,e.damage(1)),!0),damage:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.live?(a.live-=e,x.updateLive(a.live.toString())):j(),a.state},rob:e=>{a.arsenal.bullets+=e.getState().arsenal.bullets,a.killedEnemy.push(e.id),console.log(n,a.arsenal.bullets)},getRayData:()=>({ground:q,forward:B}),nextTargetPt:()=>{var e,t,s=(e=w.position.clone(),t=k.navigationMap.get("ground"),z(t,1e3,e,e));w.lookAt(s)},toGround:()=>{(q.distance>.5||!q.hit)&&w.moveWithCollisions(w.up.scale(-.5),!1)},getRadarCollider:()=>f,getRadarFragIntersection:()=>{v||k.objects.enemy.forEach(e=>{e.id!==n&&25>c.Pq.Distance(w.position,e.getPosition())&&"LIVE"===e.getState().state&&(D(e),e.escape(w.position.clone(),n))})},escape:(e,t)=>{var n=k.objects.enemy.get(t);x.escapeState(),f.material=m,v=!0,o=.4,r=!1,w.lookAt(e),w.rotation.y+=Math.PI;var i=10,l=s.onBeforeRenderObservable.add(()=>{i||("DEATH"===a.state&&(l.remove(),j()),(c.Pq.Distance(w.getAbsolutePosition().clone(),n.getPosition())>50||"DEATH"===n.getState().state)&&(l.remove(),N()),w.rotation.y+=.3*V(),i=10),i--})},hunting:D}).setPosition(t),$);W=k.state.scene,F=!1,U=!1,Z=!1,Y=()=>F=!1,W.onBeforeRenderObservable.add(()=>{if(J.toGround(),J.getState().moved){if(!F){J.moveFWD(),J.getRadarFragIntersection();var e,t,s,a=J.getRayData();if(a.ground.hit)if(a.ground.object.name.includes("edge")){F=!0,e=J,t=Y,s=0,e.nextTargetPt(),t()}else if(a.ground.object.name.includes("markMost")&&!Z){Z=!0;var n=a.ground.object.name.split("-"),i=n.pop(),o=n.pop();i&&o&&function(e,t,s,a,n){var i=k.navigationMap.get("mosts").get(e),o=i[t],r=0===t?i[1]:i[0];if(i){s.lookAt(o);var l=n.onBeforeRenderObservable.add(()=>{3>c.Pq.Distance(o,s.getPosition())&&(s.lookAt(r),a(),l.remove())})}}(i,parseInt(o),J,()=>{},W)}else a.ground.object.name.includes("path")&&!U&&(U=!0,function(e,t,s,a){var n,i,o,r,l,d,h,u,v,p,m,g=k.navigationMap.get("paths").get(e),{targetPoint:b,partPathPt:w}=(n=g,i=t.getPosition(),o=1e6,r=0,l=null,d=n.length,n.forEach((e,t)=>{var s=c.Pq.Distance(e,i);s<o&&(o=s,l=e,r=t)}),h=1,r>d/2&&(h=-1),u=h<0?n.slice(0,r).reverse():n.slice(r,d),{targetPoint:l,partPathPt:u}),f=(v=w,p=a,m=(0,C.shQ)(`lns-${G()}`,{points:v},p),{dispose:()=>{m.dispose()}});b=new c.Pq(w[0].x,t.getPosition().y,w[0].z),t.lookAt(b);var y=w.length-1,E=0,P=a.onBeforeRenderObservable.add(()=>{5>c.Pq.Distance(b,t.getPosition())&&((E+=1)>=y&&(s(),f.dispose(),P.remove()),b=w[E],t.lookAt(b))})}(a.ground.object.name,J,()=>U=!1,W))}var a=J.getRayData();a.forward.hit&&a.forward.object.name.includes("hole")&&J.jump(()=>{})}}),k.objects.enemy.set(J.id,J)}),addEventListener("attack-enemy",e=>{var t=e.detail,s=t.assaulter,a=t.victim;if(s&&a){var n=M(s),i=M(a);if(n&&i){var o=i.damage(5);n.attack(),"DEATH"===o&&(n.rob(i),i.getState().killer=n.id)}}}),document.body.addEventListener("contextmenu",e=>{if(2===e.button)return e.preventDefault(),!1}),document.addEventListener("fullscreenchange",()=>{});class Z extends HTMLElement{connectedCallback(){this.pauseButton.addEventListener("click",()=>{dispatchEvent(new CustomEvent(D))}),this.stopButton.addEventListener("click",()=>{dispatchEvent(new CustomEvent(H))})}constructor(){var e;super(),(0,E._)(this,"root",void 0),(0,E._)(this,"cssPath",`${k.paths.css}/levelScreen/style.css`),(0,E._)(this,"pauseButton",void 0),(0,E._)(this,"stopButton",void 0),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML=(e=this.cssPath,`
        <link rel="stylesheet" type="text/css" href="${e}"/>
        <div class="content">            
            <div class="top-content side"></div>
            <div class="center-content side">
                <div class="center-right-content side">
                    <button class="pause-button">||</button>
                    <button class="stop-button">S</button>
                </div>                
                <div class="center-center-content side"></div>
                <div class="center-left-content side"></div>
            </div>
           <div class="bottom-content side"></div>
        </div>
    `),this.pauseButton=this.root.querySelector(".pause-button"),this.stopButton=this.root.querySelector(".stop-button"),this.classList.add("screen")}}customElements.define("bl-level-screen",Z);class Y extends HTMLElement{connectedCallback(){}constructor(){var e;super(),(0,E._)(this,"root",void 0),(0,E._)(this,"cssPath",`${k.paths.css}/levelScreen/styleMobile.css`),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML=(e=this.cssPath,`
        <link rel="stylesheet" type="text/css" href="${e}"/>
        <div class="content">            
            <div class="top-content side"></div>
            <div class="center-content side">
                <div class="center-right-content side">
                    
                </div>                
                <div class="center-center-content side"></div>
                <div class="center-left-content side"></div>
            </div>
           <div class="bottom-content side"></div>
        </div>
    `),this.classList.add("screen")}}customElements.define("bl-level-mobile-screen",Y);class J extends HTMLElement{connectedCallback(){this.globalElement=document.querySelector("bl-start-screen"),this.runGameButton.addEventListener("click",()=>{this.runCallback()})}setRunCallback(e){this.runCallback=e}update(){}updateLanguage(){}constructor(){var e;super(),(0,E._)(this,"root",void 0),(0,E._)(this,"cssPath",`${k.paths.css}/startScreen/style.css`),(0,E._)(this,"globalElement",void 0),(0,E._)(this,"runGameButton",void 0),(0,E._)(this,"runCallback",()=>{}),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML=(e=this.cssPath,`
    <link rel="stylesheet" type="text/css" href="${e}"/>
    <div class="content">
        <h1>Start Screen</h1>
        <button class="run-game-button"></button>
    </div>
    `),this.runGameButton=this.root.querySelector(".run-game-button"),this.classList.add("screen")}}customElements.define("bl-start-screen",J);class Q extends HTMLElement{connectedCallback(){this.mirrorBlick.style.background=`url(${k.paths.image}/mirror-blick.png)`,this.mirrorBlick.style.backgroundPosition="center",this.mirrorBlick.style.backgroundSize="200px",this.mirrorBlick.style.backgroundPosition="5px",this.content.style.background=`url(${k.paths.image}/radar.jpg)`,this.content.style.backgroundPosition="center",this.radarLine.style.background=`url(${k.paths.image}/radar-line.png)`,this.radarLine.style.backgroundPosition="center"}update(e){if(!this.isPreloadEnded){if(this.percent+=e.percent,this.stage=e.stage,this.percent>=100){this.isPreloadEnded=!0;return}this.contentStage.innerText=`${this.stage}`,this.contentPercent.innerText=`${this.percent}%`}}constructor(){var e;super(),(0,E._)(this,"root",void 0),(0,E._)(this,"contentPercent",void 0),(0,E._)(this,"contentStage",void 0),(0,E._)(this,"percent",10),(0,E._)(this,"stage","model"),(0,E._)(this,"cssPath",`${k.paths.css}/preloaderScreen/style.css`),(0,E._)(this,"globalElement",void 0),(0,E._)(this,"loaderImage",void 0),(0,E._)(this,"animationPlace",void 0),(0,E._)(this,"loader",void 0),(0,E._)(this,"content",void 0),(0,E._)(this,"radarLine",void 0),(0,E._)(this,"mirrorBlick",void 0),(0,E._)(this,"isPreloadEnded",!1),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML=(e=this.cssPath,`
    <link rel="stylesheet" type="text/css" href="${e}"/>
    <div class="border rounded">
    <div class="content-preload rounded">
        <div class="mask rounded"></div>
        <div class="mirror-blick rounded"></div>
        <div class="radar-line rounded"></div>
        <div class="animation-place rounded">
            <div class="loader">
                <div class="particles">
                    <span style="--i:1;"></span>
                    <span style="--i:2;"></span>
                    <span style="--i:3;"></span>
                    <span style="--i:4;"></span>
                    <span style="--i:5;"></span>
                    <span style="--i:6;"></span>
                    <span style="--i:7;"></span>
                    <span style="--i:8;"></span>
                    <span style="--i:9;"></span>
                    <span style="--i:10;"></span>
                </div>
            </div>
        </div>

        
        <span class="percent display">0%</span>
        <span class="stage display">stage</span>
    </div>
    </div>
    `),this.contentPercent=this.root.querySelector(".percent"),this.contentStage=this.root.querySelector(".stage"),this.animationPlace=this.root.querySelector(".animation-place"),this.loader=this.root.querySelector(".loader"),this.content=this.root.querySelector(".content-preload"),this.radarLine=this.root.querySelector(".radar-line"),this.mirrorBlick=this.root.querySelector(".mirror-blick"),this.loaderImage=new Image(70,70),this.loaderImage.src=`${k.paths.image}/loader.png`,this.loaderImage.onload=()=>{this.loaderImage.classList.add("loader-img"),this.loader.prepend(this.loaderImage)},this.classList.add("screen")}}customElements.define("bl-preloader-screen",Q);class X extends HTMLElement{connectedCallback(){this.startButton.addEventListener("click",()=>{dispatchEvent(new CustomEvent(I))})}constructor(){var e;super(),(0,E._)(this,"root",void 0),(0,E._)(this,"cssPath",`${k.paths.css}/resultScreen/style.css`),(0,E._)(this,"startButton",void 0),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML=(e=this.cssPath,`
        <link rel="stylesheet" type="text/css" href="${e}"/>
        <div class="content">
            <h1>RESULT</h1>
            <button class="start-button">S</button>
        </div>
    `),this.startButton=this.root.querySelector(".start-button"),this.classList.add("hide"),this.classList.add("screen")}}customElements.define("bl-result-screen",X);class ee extends HTMLElement{connectedCallback(){this.startButton.addEventListener("click",()=>{dispatchEvent(new CustomEvent(I))})}constructor(){var e;super(),(0,E._)(this,"root",void 0),(0,E._)(this,"cssPath",`${k.paths.css}/endgameScreen/style.css`),(0,E._)(this,"startButton",void 0),this.root=this.attachShadow({mode:"open"}),this.root.innerHTML=(e=this.cssPath,`
        <link rel="stylesheet" type="text/css" href="${e}"/>
        <div class="content">
            <h1>END GAME</h1>
            <button class="start-button">S</button>
        </div>
    `),this.startButton=this.root.querySelector(".start-button"),this.classList.add("screen"),this.classList.add("hide")}}customElements.define("bl-endgame-screen",ee);var et=s(77806),es=s(63547),ea=[];ea.push({id:0,description:"level map 0",levelMap:["a1","a0","a2","a0","a3","a0","a4","a0","a5","a0","a6","x"]}),ea.push({id:1,description:"level map 1",levelMap:["b1","b0","b2","b0","b3","b0","b4","b0","b5","b0","b6","x"]}),ea.push({id:2,description:"level map 2",levelMap:["c1","c0","c2","c0","c3","c0","c4","c0","c5","c0","c6","x"]});var en=s(46880),ei=s.n(en),eo=document.querySelector("#root"),er=document.createElement("canvas");er.id="game-canvas",er.classList.add("screen"),k.state.canvas=er,k.state.isMobile="desktop"!==ei().getParser(window.navigator.userAgent).getPlatform().type,eo.append(P.add(2,er),P.add(3,new Z),P.add(31,new Y),P.add(1,new J),P.add(0,new Q),P.add(4,new X),P.add(5,new ee)),(async()=>{var e=await w(er);for(let e=0;e<1;e+=1)await W();if(e){var t,s,{scene:a,engine:n,havok:i}=e;k.state.scene=a,k.state.engine=n,a&&n&&i&&(await q(a),P.getScreen(1).setRunCallback(()=>{dispatchEvent(new CustomEvent(N,{detail:{scene:a}}))}),t=!1,(0,R.Y)(1e3).pipe((0,O.v)(()=>t)),s=ea[0],(0,et.y)((0,es.H)(s.levelMap),(0,R.Y)(500)),k.level={id:0,state:()=>t,run:()=>{t=!0},stop:()=>{t=!1}},F(a),dispatchEvent(new CustomEvent(I,{detail:{scene:a}})))}})()}},i={};function o(e){var t=i[e];if(void 0!==t)return t.exports;var s=i[e]={exports:{}};return n[e].call(s.exports,s,s.exports,o),s.exports}o.m=n,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.e=()=>Promise.resolve(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],o.O=(t,s,a,n)=>{if(s){n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[s,a,n];return}for(var r=1/0,i=0;i<e.length;i++){for(var[s,a,n]=e[i],l=!0,c=0;c<s.length;c++)(!1&n||r>=n)&&Object.keys(o.O).every(e=>o.O[e](s[c]))?s.splice(c--,1):(l=!1,n<r&&(r=n));if(l){e.splice(i--,1);var d=a();void 0!==d&&(t=d)}}return t},o.p="./",o.b=document.baseURI||self.location.href,t={410:0},o.O.j=e=>0===t[e],s=(e,s)=>{var a,n,[i,r,l]=s,c=0;if(i.some(e=>0!==t[e])){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(l)var d=l(o)}for(e&&e(s);c<i.length;c++)n=i[c],o.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return o.O(d)},(a=self.webpackChunkbugFrug=self.webpackChunkbugFrug||[]).forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a));var r=o.O(void 0,["611","141"],function(){return o(49501)});r=o.O(r)})();